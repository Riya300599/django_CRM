{% extends "accounts/base.html" %}

{% block content %}
  {% include "accounts/status.html" %}
  <br>

  <div class="row">
    <div class="col-md-5">
      <h4>CUSTOMERS:</h4>
      <hr>

      <div class="card card-body">
        <table class="table table-sm">
          <tr>
            <th></th>
            <th>Customer</th>
            <th>Total Orders</th>
          </tr>

          {% for cust in customers %}
            <tr>
              <td>
                <a class="btn btn-info btn-sm" href="{% url 'accounts:customer' cust.id %}">View</a>
              </td>
              <td>{{ cust.name }}</td>
              <td>{{ cust.order_set.all.count }}</td>
            </tr>
          {% endfor %}
        </table>
      </div>
    </div>

    <div class="col-md-7">
      <h4>ORDERS:</h4>
      <hr>

      <div class="card card-body">
        <table class="table table-sm">
          <tr>
            <th>Products</th>
            <th>Date Ordered</th>
            <th>Status</th>
            <th>Update</th>
            <th>Remove</th>
          </tr>

          {% for ord in orders %}
            <tr>
              <td>{{ ord.product }}</td>
              <td>{{ ord.date_created }}</td>
              <td>{{ ord.status }}</td>
              <td>
                <a class="btn btn-info btn-sm" href="{% url 'accounts:update_order' ord.id %}" role="button">Update</a>
              </td>
              <td>
                <a class="btn btn-danger btn-sm" href="{% url 'accounts:delete_order' ord.id %}" role="button">Delete</a>
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    </div>
  </div>
{% endblock %}
